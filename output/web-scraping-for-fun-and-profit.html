<!DOCTYPE html>
<html lang="en">
  <head>
    <link href='http://fonts.googleapis.com/css?family=Noticia+Text:400,700' rel='stylesheet' type='text/css' />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="">
    <meta name="author" content="Sean Beck">

    <title> Web Scraping for Fun and Profit | Show Me the Code </title>

    <link rel="stylesheet" href="/theme/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/font-awesome.css" type="text/css"/>
    <link rel="shortcut icon" href="/theme/images/favicon.ico">
  </head>
  <body>
    <div class=container>
<div class="header">
    <a href="/index.html">Show Me the Code</a> <span class="muted"></span>
</div>

<div class=navigation>
    <ul>
            <li><a href="/index.html">Blog</a> </li>
            <li><a href="/archives.html">Archive</a> </li>
            <li><a href="/tags.html">Tags</a> </li>
            <li><a href="/about.html">About</a> </li>
    </ul>
</div>
<div class=separator></div>        
        <div class=body>
    <h1 class="title"> Web Scraping for Fun and Profit</h1>
    <p class=date> Nov 24, 2015 </p>
    <h2>Web Scraping</h2>
<p>Web scraping is the practice (or art, in some cases) of extracting data from webpages on the internet.
It is used for all sorts of purposes, such as getting tables of data or for marketing.
It is not something difficult to do, given the right set of tools.
It typically involves getting the raw HTML of a page and extracting the data, but it can be argued that using a site's API also qualifies.
Using Python, I will give an example of how it can help you.</p>
<h2>The Problem</h2>
<p>On Reddit there is a subreddit devoted to buying/selling/trading precious metals called <a href="https://www.reddit.com/r/pmsforsale">/r/pmsforsale</a>.
Lots of different coins and bars are sold on there daily, and members of the community are quick to respond to postings.
For me to get to a post first I would need to constantly refresh the page and look through every post to determine if it had anything of interest to me.
This is impractical for me since I work all day and cannot spend the whole day on Reddit (shocking, I know).
Occasionally Mercury Dimes and NORFED rounds are put up for sale, and being popular items they tend to be claimed quickly.
If I ever want a chance at purchasing either of these items I need a better solution.</p>
<h2>The Solution</h2>
<p>Using 109 lines of Python code (including whitespace and docstrings) we can create a solution to my problem.
I can't constantly monitor new posts, but a bot sure can.
A bot can't reach over and poke me when it sees something, but it can send an email.</p>
<p>Using the Reddit API via <code>praw</code> the bot grabs the newest 25 posts on the target subreddit and checks the title and text for the desired items.
This is done every 30 seconds.
To prevent the need to store every post the bot has seen, it only looks at posts that are new since the last time it checked.
Target metals are specified in a YAML configuration file and notifications are sent via email using <a href="https://www.mailgun.com/">Mailgun</a>.
Mailgun is a free service that allows you to send up to 10,000 emails in a month using their API.
Using a simple HTTP POST request you can send an email to whoever you want.</p>
<p>The full code of the bot can be seen <a href="https://github.com/ThaWeatherman/scrapers/blob/master/reddit/pmsforsale.py">on my Github repo</a> containing all of my web scrapers.
An example configuration file is provided so users can easily get the bot running.
It is also designed to be modular, meaning you can specify your own Reddit account and target any subreddit and search for any text.
To run this bot, use Python 3.5 (it should work with Python 2.7 as well) and install <code>praw</code> and <code>pyyaml</code>.
Run <code>python pmsforsale.py -h</code> for usage help.</p>
<p>I have managed to jump on a good NORFED deal since starting the bot, while passing on a few other Mercury Dime sales.
This is a simple example of web scraping can be used to automate your life and make simple tasks easier for you.
Check out all the other scrapers in that repository for more inspiration and examples.</p>
    
<div class=twitter>
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
    <p class=tags>This entry was tagged as
      <a href="/tag/python.html">python</a>
      <a href="/tag/web-scraping.html">web-scraping</a>
    </p>
        </div>
        
<div class=footer>
  <p>&copy; Copyright <script language="JavaScript">var date = new Date(); document.write(date.getFullYear());</script> by Sean Beck</p>
  <p> Powered by <a href="http://pypi.python.org/pypi/pelican/" target="_blank">Pelican</a>.  
    <a href="https://github.com/fjavieralba/flasky">Theme</a>  by <a href="http://fjavieralba.com">fjavieralba</a>
  </p> 
  <p>
    <div class=social style="font-size: 27px;">
      <ul>
<script language="JavaScript">
          u = 'seanmckaybeck';
          s = 'gmail.com';
          document.write('<a href=\"mailto:' + u + '@' + s + '\" target=\"_blank\">');
        </script>
            <li><i class="icon-envelope icon-large"></i> </li>
        </a><a href="http://twitter.com/seanmckaybeck" target="_blank"> <li> <i class="icon-twitter-sign icon-large"> </li></i> </a><a href="https://www.linkedin.com/in/seanmckaybeck" target="_blank"><li><i class="icon-linkedin-sign icon-large" ></i></li></a><a href="https://github.com/ThaWeatherman" target="_blank"> <li> <i class="icon-github-sign icon-large"></i> </li> </a>

        <a href="https://seanmckaybeck.com/feeds/all.rss.xml" rel="alternate" title="Recent Blog Posts"><li> <i class="icon-rss icon-large"></i> </li></a>
      </ul>
    </div>
  </p>
</div>    </div>
  </body>
</html>
